<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>sommioのblog</title>
        <subtitle></subtitle>
        <icon>https://sommio.me/images/favicon.svg</icon>
        <link>https://sommio.me</link>
        <author>
          <name>sommio</name>
        </author>
        <description></description>
        <language>zh-CN</language>
        <pubDate>Thu, 24 Feb 2022 06:12:45 +0800</pubDate>
        <lastBuildDate>Thu, 24 Feb 2022 06:12:45 +0800</lastBuildDate>
        <category term="sommio" />
        <category term=" sommioのblog" />
        <category term=" sommio的博客" />
        <category term=" sommio博客" />
        <category term=" sommio blog" />
        <category term=" sommio&#39;s blog" />
        <item>
            <guid isPermalink="true">https://sommio.me/2022/02/24/%E5%9C%A8ArchLinux%E4%B8%8A%E5%AE%89%E8%A3%85%E5%85%B7%E6%9C%89vo=gpu-next%E6%94%AF%E6%8C%81%E7%9A%84mpv/</guid>
            <title>在 Arch Linux 上安装具有 vo=gpu-next 支持的 mpv</title>
            <link>https://sommio.me/2022/02/24/%E5%9C%A8ArchLinux%E4%B8%8A%E5%AE%89%E8%A3%85%E5%85%B7%E6%9C%89vo=gpu-next%E6%94%AF%E6%8C%81%E7%9A%84mpv/</link>
            <category term="Applications" scheme="https://sommio.me/categories/Applications/" />
            <category term="mpv" scheme="https://sommio.me/tags/mpv/" />
            <pubDate>Thu, 24 Feb 2022 06:12:45 +0800</pubDate>
            <description><![CDATA[ &lt;h2 id=&#34;对于-gpu-next-的简介&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#对于-gpu-next-的简介&#34;&gt;#&lt;/a&gt; 对于 gpu-next 的简介&lt;/h2&gt;
&lt;p&gt;总体上  &lt;code&gt;vo=gpu-next&lt;/code&gt;  是  &lt;code&gt;vo=gpu&lt;/code&gt;  的预览版本一样东西，最大的亮点是对 Dolby Vision 的部分支持，并且因为重构了许多关键算法性能表现会更好，具体的差异参见项目主页 WIki 上的 &lt;a href=&#34;https://github.com/mpv-player/mpv/wiki/GPU-Next-vs-GPU&#34;&gt;GPU Next vs GPU&lt;br /&gt;
&lt;/a&gt; 页面&lt;/p&gt;
&lt;h2 id=&#34;安装具有-libplacebo-v4-支持的-libplacebo&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装具有-libplacebo-v4-支持的-libplacebo&#34;&gt;#&lt;/a&gt; 安装具有 libplacebo-v4 支持的 libplacebo&lt;/h2&gt;
&lt;p&gt;首先先安装 AUR 上的  &lt;code&gt;libplacebo-git&lt;/code&gt; ，因为使用  &lt;code&gt;vo=gpu-next&lt;/code&gt;  需要具有  &lt;code&gt;libplacebo-v4&lt;/code&gt;  支持的  &lt;code&gt;libplacebo&lt;/code&gt; ，但官方仓库里的  &lt;code&gt;libplacebo&lt;/code&gt;  预编译包虽然版本号符合要求但似乎没有  &lt;code&gt;libplacebo-v4&lt;/code&gt;  支持，因此如果直接安装  &lt;code&gt;mpv-git&lt;/code&gt;  是无法使用  &lt;code&gt;vo=gpu-next&lt;/code&gt;  的。&lt;/p&gt;
&lt;p&gt;在此之前得安装 AUR 上的  &lt;code&gt;ffmpeg-vulkan&lt;/code&gt;  或 ArchLinuxCN 源的预编译包&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;yay -S ffmpeg-vulkan&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;or&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; pacman -S ffmpeg-vulkan&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;否则会导致无法通过  &lt;code&gt;build()&lt;/code&gt;  中的 vulkan test&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;collect2: error: ld returned &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;token builtin class-name&#34;&gt;exit&lt;/span&gt; status&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;137&lt;/span&gt;/137&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt; Linking target src/test.vulkan.c&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;ninja: build stopped: subcommand failed.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;ERROR: A failure occurred &lt;span class=&#34;token keyword&#34;&gt;in&lt;/span&gt; build&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;安装最新-master-分支的-mpv&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装最新-master-分支的-mpv&#34;&gt;#&lt;/a&gt; 安装最新 master 分支的 mpv&lt;/h2&gt;
&lt;p&gt;之后只需要直接装 AUR 上的  &lt;code&gt;mpv-git&lt;/code&gt;  就好，安装其它最新 master 分支的包也是没问题的比如  &lt;code&gt;mpv-full&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;yay -S mpv-git&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;装完之后  &lt;code&gt;vo=help&lt;/code&gt;  就可以看到  &lt;code&gt;gpu-next&lt;/code&gt;  了&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;mpv --vo&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;help&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Available video outputs:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  libmpv           render API &lt;span class=&#34;token keyword&#34;&gt;for&lt;/span&gt; libmpv&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  gpu              Shader-based GPU Renderer&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  gpu-next         Video output based on libplacebo&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  vdpau            VDPAU with X11&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  wlshm            Wayland SHM video output &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;software scaling&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  xv               X11/Xv&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  vaapi            VA API with X11&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  x11              X11 &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;software scaling&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  null             Null video output&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  image            Write video frames to image files&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  tct              true-color terminals&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  caca             libcaca&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  drm              Direct Rendering Manager &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;software scaling&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;需要注意，因为安装了  &lt;code&gt;libplacebo-git&lt;/code&gt;  所以直接装 CN 源的预编译包运行时会报错找不到  &lt;code&gt;libplacebo.so.192&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;mpv: error &lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; loading shared libraries: libplacebo.so.192: cannot &lt;span class=&#34;token function&#34;&gt;open&lt;/span&gt; shared object file: No such &lt;span class=&#34;token function&#34;&gt;file&lt;/span&gt; or directory&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; ]]></description>
        </item>
    </channel>
</rss>
