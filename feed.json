{
    "version": "https://jsonfeed.org/version/1",
    "title": "sommioのblog",
    "subtitle": "",
    "icon": "https://sommio.moe/images/favicon.svg",
    "description": "",
    "home_page_url": "https://sommio.moe",
    "items": [
        {
            "id": "https://sommio.moe/2022/02/24/%E5%9C%A8ArchLinux%E4%B8%8A%E5%AE%89%E8%A3%85%E5%85%B7%E6%9C%89vo=gpu-next%E6%94%AF%E6%8C%81%E7%9A%84mpv/",
            "url": "https://sommio.moe/2022/02/24/%E5%9C%A8ArchLinux%E4%B8%8A%E5%AE%89%E8%A3%85%E5%85%B7%E6%9C%89vo=gpu-next%E6%94%AF%E6%8C%81%E7%9A%84mpv/",
            "title": "在 Arch Linux 上安装具有 vo=gpu-next 支持的 mpv",
            "date_published": "2022-02-23T22:12:45.000Z",
            "content_html": "<h2 id=\"对于-gpu-next-的简介\"><a class=\"anchor\" href=\"#对于-gpu-next-的简介\">#</a> 对于 gpu-next 的简介</h2>\n<p>总体上  <code>vo=gpu-next</code>  是  <code>vo=gpu</code>  的预览版本一样东西，最大的亮点是对 Dolby Vision 的部分支持，并且因为重构了许多关键算法性能表现会更好，具体的差异见项目主页 WIki 上的 <a href=\"https://github.com/mpv-player/mpv/wiki/GPU-Next-vs-GPU\">GPU Next vs GPU<br />\n</a></p>\n<h2 id=\"安装具有-libplacebo-v4-支持的-libplacebo\"><a class=\"anchor\" href=\"#安装具有-libplacebo-v4-支持的-libplacebo\">#</a> 安装具有 libplacebo-v4 支持的 libplacebo</h2>\n<p>首先先安装 AUR 上的  <code>libplacebo-git</code> ，因为使用  <code>vo=gpu-next</code>  需要具有  <code>libplacebo-v4</code>  支持的  <code>libplacebo</code> ，但官方仓库里的  <code>libplacebo</code>  预编译包虽然版本号符合要求但似乎没有  <code>libplacebo-v4</code>  支持，因此如果直接安装  <code>mpv-git</code>  是无法使用  <code>vo=gpu-next</code>  的</p>\n<p>在此之前得安装 AUR 上的  <code>ffmpeg-vulkan</code>  或 ArchLinuxCN 源的预编译包</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yay -S ffmpeg-vulkan</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>or</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">sudo</span> pacman -S ffmpeg-vulkan</pre></td></tr></table></figure><p>否则会导致无法通过  <code>build()</code>  中的 vulkan test</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>collect2: error: ld returned <span class=\"token number\">1</span> <span class=\"token builtin class-name\">exit</span> status</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token number\">137</span>/137<span class=\"token punctuation\">]</span> Linking target src/test.vulkan.c</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ninja: build stopped: subcommand failed.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ERROR: A failure occurred <span class=\"token keyword\">in</span> build<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"安装最新-master-分支的-mpv\"><a class=\"anchor\" href=\"#安装最新-master-分支的-mpv\">#</a> 安装最新 master 分支的 mpv</h2>\n<p>之后只需要直接装 AUR 上的  <code>mpv-git</code>  就好，安装其它最新 master 分支的包也是没问题的比如  <code>mpv-full</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yay -S mpv-git</pre></td></tr></table></figure><p>装完之后  <code>vo=help</code>  就可以看到  <code>gpu-next</code>  了</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mpv --vo<span class=\"token operator\">=</span>help</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Available video outputs:</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  libmpv           render API <span class=\"token keyword\">for</span> libmpv</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  gpu              Shader-based GPU Renderer</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  gpu-next         Video output based on libplacebo</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  vdpau            VDPAU with X11</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  wlshm            Wayland SHM video output <span class=\"token punctuation\">(</span>software scaling<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  xv               X11/Xv</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  vaapi            VA API with X11</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  x11              X11 <span class=\"token punctuation\">(</span>software scaling<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  null             Null video output</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  image            Write video frames to image files</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  tct              true-color terminals</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  caca             libcaca</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  drm              Direct Rendering Manager <span class=\"token punctuation\">(</span>software scaling<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>需要注意，因为安装了  <code>libplacebo-git</code>  所以直接装 CN 源的预编译包运行时会报错找不到  <code>libplacebo.so.192</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mpv: error <span class=\"token keyword\">while</span> loading shared libraries: libplacebo.so.192: cannot <span class=\"token function\">open</span> shared object file: No such <span class=\"token function\">file</span> or directory</pre></td></tr></table></figure>",
            "tags": [
                "Applications",
                "mpv"
            ]
        }
    ]
}